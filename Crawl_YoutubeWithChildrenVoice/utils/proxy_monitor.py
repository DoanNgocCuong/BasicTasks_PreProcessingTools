#!/usr/bin/env python3\n\"\"\"\nSimple Proxy Monitor\n\nShows clear signals when requests are going through the proxy.\n\"\"\"\n\nimport time\nimport threading\nfrom datetime import datetime\nimport os\n\ndef monitor_proxy_activity():\n    \"\"\"Monitor proxy activity by checking environment variables and network activity.\"\"\"\n    \n    print(\"\ud83d\udcca PROXY ACTIVITY MONITOR\")\n    print(\"=\" * 40)\n    \n    # Check if proxy environment variables are set\n    http_proxy = os.environ.get('HTTP_PROXY', None)\n    https_proxy = os.environ.get('HTTPS_PROXY', None)\n    \n    if http_proxy or https_proxy:\n        print(f\"\u2705 PROXY CONFIGURED:\")\n        if http_proxy:\n            print(f\"   HTTP_PROXY: {http_proxy}\")\n        if https_proxy:\n            print(f\"   HTTPS_PROXY: {https_proxy}\")\n        print(f\"\ud83d\udd04 All HTTP requests should now go through the proxy!\")\n    else:\n        print(f\"\u26a0\ufe0f  NO PROXY CONFIGURED\")\n        print(f\"   HTTP_PROXY: Not set\")\n        print(f\"   HTTPS_PROXY: Not set\")\n        print(f\"\ud83d\udccb To enable proxy, run:\")\n        print(f\"   $env:HTTP_PROXY='http://127.0.0.1:8080'\")\n        print(f\"   $env:HTTPS_PROXY='http://127.0.0.1:8080'\")\n    \n    print(f\"\\n\ud83d\udd70 Monitoring started at {datetime.now().strftime('%H:%M:%S')}\")\n    print(f\"\ud83d\udcdd Watch this space for request activity...\")\n    print(f\"\u23f9\ufe0f  Press Ctrl+C to stop monitoring\\n\")\n    \n    # Simple monitoring loop\n    try:\n        counter = 0\n        while True:\n            counter += 1\n            \n            # Show heartbeat every 10 seconds\n            if counter % 10 == 0:\n                current_time = datetime.now().strftime('%H:%M:%S')\n                print(f\"\ud83d\udd04 [{current_time}] Monitor active - Waiting for proxy activity...\")\n            \n            time.sleep(1)\n            \n    except KeyboardInterrupt:\n        print(f\"\\n\u23f9\ufe0f  Monitoring stopped\")\n\ndef show_proxy_setup_instructions():\n    \"\"\"Show clear instructions for setting up proxy.\"\"\"\n    print(\"\ud83d\udce6 PROXY SETUP INSTRUCTIONS\")\n    print(\"=\" * 40)\n    print(\"\\n1. \ud83d\ude80 Start the proxy server (in Terminal 1):\")\n    print(\"   .venv\\\\Scripts\\\\activate\")\n    print(\"   python selenium_proxy_layer/launcher.py\")\n    print(\"\\n2. \ud83d\udd27 Configure proxy (in Terminal 2):\")\n    print(\"   .venv\\\\Scripts\\\\activate\")\n    print(\"   $env:HTTP_PROXY='http://127.0.0.1:8080'\")\n    print(\"   $env:HTTPS_PROXY='http://127.0.0.1:8080'\")\n    print(\"\\n3. \ud83c\udfaf Run your crawler (same Terminal 2):\")\n    print(\"   python youtube_video_crawler.py\")\n    print(\"\\n4. \ud83d\udcca Monitor activity:\")\n    print(\"   - Watch proxy server terminal for request logs\")\n    print(\"   - Look for IP rotation messages\")\n    print(\"   - Check admin endpoint: curl http://127.0.0.1:8080/_proxy_admin/status\")\n    print(\"\\n\ud83d\udcdd Expected signs proxy is working:\")\n    print(\"   \u2713 Proxy terminal shows: 'ðŸ”„ PROXY REQUEST #X'\")\n    print(\"   \u2713 Different browser IPs in logs\")\n    print(\"   \u2713 'Requests until rotation: X' messages\")\n    print(\"   \u2713 Admin status shows total_requests > 0\")\n\nif __name__ == \"__main__\":\n    show_proxy_setup_instructions()\n    print(\"\\n\" + \"=\"*40)\n    monitor_proxy_activity()\n